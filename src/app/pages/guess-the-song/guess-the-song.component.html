<div class="min-h-screen bg-gray-100 flex flex-col items-center justify-center" *ngIf="isLoggedIn$ | async">

  <div *ngIf="authState$ | async as socialUser" class="bg-white rounded-lg overflow-hidden ring-1 ring-slate-900/5 dark:bg-slate-800 dark:highlight-white/5 dark:ring-0 p-8 text-center mb-4">
    <img src="{{ socialUser?.photoUrl }}" referrerpolicy="no-referrer">
    <div>
      <h4>Welcome {{ socialUser?.name }}</h4>
      <p>{{ socialUser?.email }}</p>
    </div>
    <div class="card-block">
      <app-button [value]="'Sign out'" (onClick)="signOut()"></app-button>
    </div>
  </div>

  <div class="w-full max-w-md mx-auto">

    <form [formGroup]="songsForm" (ngSubmit)="onSubmit()" class="bg-white shadow-md rounded px-8 pt-6 pb-8 mb-6">
      <div class="mb-6">
        <div *ngIf="(currentPhrase$ | async) as currentPhrase; else loading">
          <span class="font-bold">{{ currentPhrase }}</span>
        </div>
        <ng-template #loading>
          <div>Loading...</div>
        </ng-template>
      </div>
      <div class="flex flex-col">
        <div *ngFor="let song of (songs$ | async)">
          <input
            class="mr-2"
            type="radio"
            [value]="song.songId"
            formControlName="songChoice"
            [id]="'song-' + song.songId"
          />
          <label [for]="'song-' + song.songId">{{ song.title }}</label>
        </div>
      </div>
      <div class="flex items-center justify-between pt-4">
        <app-button
          [isDisabled]="!!(stopCondition$ | async)"
          [inputType]="'submit'"
          [value]="'Guess'"
        ></app-button>
      </div>
      <div class="w-full h-4 bg-gray-300 mt-4">
        <div
          [ngStyle]="{ 'width': (countdown$ | async) + '%' }"
          class="h-4 bg-green-500 transition-all duration-1000"
        ></div>
      </div>
    </form>
  </div>
</div>
