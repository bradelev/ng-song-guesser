"use strict";(self.webpackChunkng_song_guesser=self.webpackChunkng_song_guesser||[]).push([[341],{2341:(le,S,a)=>{a.r(S),a.d(S,{GuessTheSongComponent:()=>re});var Z=a(9895),g=a(6895),e=a(8256),r=a(433),G=a(1135),I=a(7579),_=a(9841),l=a(4004),d=a(5698),m=a(4049),A=a(9751),$=a(3532);function c(o=0,s,t=m.P){let n=-1;return null!=s&&((0,$.K)(s)?t=s:n=s),new A.y(i=>{let h=function N(o){return o instanceof Date&&!isNaN(o)}(o)?+o-t.now():o;h<0&&(h=0);let O=0;return t.schedule(function(){i.closed||(i.next(O++),0<=n?this.schedule(void 0,n):i.complete())},h)})}var w=a(2529),f=a(8675),p=a(3900),P=a(9300),L=a(8505),J=a(7272),B=a(4482),W=a(5403),Y=a(5032),j=a(9718),E=a(5577);function x(o,s){return s?t=>(0,J.z)(s.pipe((0,d.q)(1),function k(){return(0,B.e)((o,s)=>{o.subscribe((0,W.x)(s,Y.Z))})}()),t.pipe(x(o))):(0,E.z)((t,n)=>o(t,n).pipe((0,d.q)(1),(0,j.h)(t)))}var F=a(263),T=a(9646);const C=[{songId:1,title:"Bohemian Rhapsody",artist:"Queen",lyrics:["Is this the real life?","Is this just fantasy?","Caught in a landslide","No escape from reality","Open your eyes","Look up to the skies and see","I'm just a poor boy, I need no sympathy","Because I'm easy come, easy go","A little high, little low","Anyway the wind blows, doesn't really matter to me, to me"]},{songId:2,title:"Imagine",artist:"John Lennon",lyrics:["Imagine there's no heaven","It's easy if you try","No hell below us","Above us only sky","Imagine all the people living for today","Imagine there's no countries","It isn't hard to do","Nothing to kill or die for","And no religion too","Imagine all the people living life in peace, you"]},{songId:3,title:"Stairway to Heaven",artist:"Led Zeppelin",lyrics:["There's a lady who's sure all that glitters is gold","And she's buying a stairway to heaven","When she gets there she knows, if the stores are all closed","With a word she can get what she came for","Oh oh oh oh and she's buying a stairway to heaven"]},{songId:4,title:"Like a Rolling Stone",artist:"Bob Dylan",lyrics:["Once upon a time you dressed so fine","Threw the bums a dime in your prime, didn't you?","People'd call, say, \"Beware doll, you're bound to fall\"","You thought they were all kiddin' you","You used to laugh about","Everybody that was hangin' out","Now you don't talk so loud","Now you don't seem so proud","About having to be scrounging for your next meal"]},{songId:5,title:"What's Going On",artist:"Marvin Gaye",lyrics:["Mother, mother","There's too many of you crying","Brother, brother, brother","There's far too many of you dying","You know we've got to find a way","To bring some lovin' here today, eheh","Father, father","We don't need to escalate","You see, war is not the answer","For only love can conquer hate","You know we've got to find a way","To bring some lovin' here today, oh oh oh"]},{songId:6,title:"Smells Like Teen Spirit",artist:"Nirvana",lyrics:["Load up on guns, bring your friends","It's fun to lose and to pretend","She's over bored and self-assured","Oh no, I know a dirty word","Hello, hello, hello, how low","Hello, hello, hello, how low","Hello, hello, hello, how low","Hello, hello, hello","With the lights out, it's less dangerous","Here we are now, entertain us","I feel stupid and contagious","Here we are now, entertain us","A mulatto, an albino, a mosquito, my libido","Yeah, hey"]},{songId:7,title:"Hotel California",artist:"Eagles",lyrics:["On a dark desert highway, cool wind in my hair","Warm smell of colitas, rising up through the air","Up ahead in the distance, I saw a shimmering light","My head grew heavy and my sight grew dim","I had to stop for the night","There she stood in the doorway;","I heard the mission bell","And I was thinking to myself","'This could be heaven or this could be Hell'","Then she lit up a candle and she showed me the way","There were voices down the corridor,","I thought I heard them say","Welcome to the Hotel California","Such a lovely place (such a lovely place)","Such a lovely face"]},{songId:8,title:"Billie Jean",artist:"Michael Jackson",lyrics:["She was more like a beauty queen","From a movie scene","I said, 'Don't mind, but what do you mean","I am the one","Who will dance on the floor in the round?'","She said I am the one who will dance on the floor in the round","She told me her name was Billie Jean","As she caused a scene","Then every head turned with eyes that dreamed of being the one","Who will dance on the floor in the round","People always told me, 'Be careful of what you do","Don't go around breaking young girls' hearts'","But she came and stood right by me","Just the smell of sweet perfume","And this happened much too soon"]},{songId:9,title:"Superstition",artist:"Stevie Wonder"},{songId:10,title:"Purple Haze",artist:"Jimi Hendrix"},{songId:11,title:"Sweet Child o' Mine",artist:"Guns N' Roses"},{songId:12,title:"Hey Jude",artist:"The Beatles"},{songId:13,title:"Tangled Up in Blue",artist:"Bob Dylan"},{songId:14,title:"No Woman, No Cry",artist:"Bob Marley"},{songId:15,title:"Losing My Religion",artist:"R.E.M."},{songId:16,title:"I Want to Hold Your Hand",artist:"The Beatles"},{songId:17,title:"Born to Run",artist:"Bruce Springsteen"},{songId:18,title:"Wonderwall",artist:"Oasis"},{songId:19,title:"Under Pressure",artist:"Queen & David Bowie"},{songId:20,title:"Creep",artist:"Radiohead"}];let Q=(()=>{class o{getSongs(){return(0,T.of)(C)}getLyrics(t){return(0,T.of)(C).pipe((0,l.U)(n=>n.find(i=>i.songId===t)),(0,l.U)(n=>n?.lyrics??[]))}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var D=a(42),z=a(8562);function R(o,s){if(1&o&&(e.TgZ(0,"p",15),e._uU(1," Your team is "),e.TgZ(2,"strong"),e._uU(3),e.qZA()()),2&o){const t=s.ngIf;e.xp6(3),e.Oqu(t.name)}}function K(o,s){if(1&o&&(e.TgZ(0,"div")(1,"span",16),e._uU(2),e.qZA()()),2&o){const t=s.ngIf;e.xp6(2),e.Oqu(t)}}function V(o,s){1&o&&(e.TgZ(0,"div"),e._uU(1,"Loading..."),e.qZA())}function X(o,s){if(1&o&&(e.TgZ(0,"div",17),e._UZ(1,"input",18),e.TgZ(2,"label",19),e._uU(3),e.qZA()()),2&o){const t=s.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("id","song-"+t.songId)("value",t.songId)("disabled",n.isGameOver),e.xp6(1),e.ekj("pointer-events-none",n.isGameOver),e.Q6J("for","song-"+t.songId),e.xp6(1),e.hij(" ",t.title," ")}}function q(o,s){if(1&o&&(e.TgZ(0,"div",22)(1,"div",23),e._uU(2),e.qZA(),e.O4$(),e.TgZ(3,"svg",24),e._UZ(4,"circle",25),e.qZA()()),2&o){const t=e.oxw().ngIf;e.xp6(2),e.Oqu(t)}}function ee(o,s){1&o&&(e.TgZ(0,"span",16),e._uU(1,"Time's up!"),e.qZA())}function te(o,s){1&o&&(e.TgZ(0,"span",16),e._uU(1,"Game Over"),e.qZA())}function oe(o,s){if(1&o&&(e.TgZ(0,"div",26),e.YNc(1,ee,2,0,"span",27),e.YNc(2,te,2,0,"span",27),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",!t.isGameOver),e.xp6(1),e.Q6J("ngIf",t.isGameOver)}}function ne(o,s){if(1&o&&(e.ynx(0),e.YNc(1,q,5,1,"div",20),e.YNc(2,oe,3,2,"ng-template",null,21,e.W1O),e.BQk()),2&o){const t=s.ngIf,n=e.MAs(3),i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t>0&&!i.isGameOver)("ngIfElse",n)}}const se=function(o,s){return{"opacity-50":o,"cursor-not-allowed":s}};function ie(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2),e.YNc(2,R,4,1,"p",3),e.TgZ(3,"div",4)(4,"p"),e._uU(5),e.qZA(),e.TgZ(6,"p"),e._uU(7),e.qZA(),e.TgZ(8,"p"),e._uU(9),e.qZA()(),e.TgZ(10,"form",5),e.NdJ("ngSubmit",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onSubmit())}),e.TgZ(11,"div",6),e.YNc(12,K,3,1,"div",7),e.ALo(13,"async"),e.YNc(14,V,2,0,"ng-template",null,8,e.W1O),e.qZA(),e.TgZ(16,"div",9),e.YNc(17,X,4,7,"div",10),e.ALo(18,"async"),e.qZA(),e.TgZ(19,"div",11),e._UZ(20,"app-button",12),e.ALo(21,"async"),e.qZA()(),e.TgZ(22,"div",13),e.YNc(23,ne,4,2,"ng-container",14),e.ALo(24,"async"),e.qZA()()()}if(2&o){const t=s.ngIf,n=e.MAs(15),i=e.oxw();e.xp6(2),e.Q6J("ngIf",t.selectedTeam),e.xp6(3),e.hij("Attempts: ",i.attempts," / 3"),e.xp6(2),e.hij("Played Games: ",i.playedGames,""),e.xp6(2),e.hij("Total Score: ",i.totalScore,""),e.xp6(1),e.Q6J("formGroup",i.songsForm)("ngClass",e.WLB(22,se,i.isGameOver,i.isGameOver)),e.xp6(2),e.Q6J("ngIf",e.lcZ(13,14,i.currentPhrase$))("ngIfElse",n),e.xp6(5),e.Q6J("ngForOf",e.lcZ(18,16,i.songs$)),e.xp6(3),e.Q6J("isDisabled",!!e.lcZ(21,18,i.stopCondition$)||i.isGameOver)("inputType","submit")("value","Guess")("classes","w-full"),e.xp6(3),e.Q6J("ngIf",e.lcZ(24,20,i.timer$))}}const u=1e3;let re=(()=>{class o{constructor(){this._router=(0,e.f3M)(Z.F0),this._fb=(0,e.f3M)(r.qu),this._authService=(0,e.f3M)(F.e),this._songsService=(0,e.f3M)(Q),this._userService=(0,e.f3M)(z.f),this._document=(0,e.f3M)(g.K0),this.attempts=0,this.playedGames=0,this.totalScore=0,this.isGameOver=!1,this.teamCode="",this.randomSongId=Math.floor(8*Math.random())+1,this.lyrics$=this._getLyrics(this.randomSongId),this.stopCondition$=new G.X(!1),this._resetTimer$=new I.x,this.songCorrect$=new I.x,this.authState$=this._authService.authState$,this.vm$=(0,_.a)([this._authService.authState$,this._authService.isLoggedIn$,this._authService.selectedTeam$]).pipe((0,l.U)(([t,n,i])=>({authState:t,isLoggedIn:n,selectedTeam:i}))),this.songsForm=this._fb.group({songChoice:[null]}),this.songs$=this._songsService.getSongs().pipe((0,d.q)(1),(0,l.U)(t=>this._getSongOptions(t,this.randomSongId,5))),this.currentPhrase$=function U(o=0,s=m.z){return o<0&&(o=0),c(o,o,s)}(5e3).pipe((0,w.o)(()=>!this.stopCondition$.getValue()),(0,f.O)(0),(0,p.w)(()=>this.lyrics$),(0,l.U)(t=>t[Math.floor(Math.random()*t.length)])),this.timer$=this._resetTimer$.pipe((0,f.O)(void 0),(0,p.w)(()=>c(0,u)),(0,l.U)(t=>30-t)),this.countdown_reversed$=this.songCorrect$.pipe((0,f.O)(null),(0,p.w)(()=>c(0,u).pipe((0,w.o)(()=>!this.stopCondition$.getValue()),(0,l.U)(t=>30-t),(0,d.q)(31))))}ngOnInit(){this.authState$.subscribe(t=>{t||this._router.navigate(["/login"])})}_resetCountdown(){this._resetTimer$.next(void 0),this._toggleClass("#countdown svg","active",500)}_toggleClass(t,n,i){const h=this._document.querySelector(t);h?.classList.toggle(n),setTimeout(()=>{h?.classList.toggle(n)},i)}onSubmit(){this.attempts++;const t=this.songsForm.get("songChoice")?.value;Number(t)===this.randomSongId?(console.log("isCorrect -> ",this.randomSongId),this.playedGames++,this.totalScore+=1===this.attempts?5:2===this.attempts?3:1,console.log("FEEDBACK MESSAGE: totalScore => ",this.totalScore),c(1e3).subscribe(n=>{this.attempts=0,this.randomSongId=Math.floor(8*Math.random())+1,this.lyrics$=this._getLyrics(this.randomSongId),this.songs$=this._songsService.getSongs().pipe((0,d.q)(1),(0,l.U)(i=>this._getSongOptions(i,this.randomSongId,5))),this.stopCondition$.next(!1),this.songCorrect$.next(),this._resetCountdown()})):(this._toggleClass("form.bg-white.shadow-md.rounded","shake-error",u),console.log("incorrect => ",Number(t),this.randomSongId)),this.attempts>=3&&this.gameOver()}gameOver(){this.isGameOver=!0,this.stopCondition$.next(!0),this._authService.authState$.pipe((0,d.q)(1),(0,P.h)(t=>!!t),(0,L.b)(t=>{this._userService.updateUserScore({email:t.email,playedGames:this.playedGames,totalScore:this.totalScore})}),function H(o,s=m.z){const t=c(o,s);return x(()=>t)}(3e3)).subscribe(()=>{this._router.navigate(["/ranking"])})}_getLyrics(t){return this._songsService.getLyrics(t).pipe((0,l.U)(n=>this._shuffleArray(n)))}_getSongOptions(t,n,i){const b=t.filter(y=>y.songId!==n).sort(()=>Math.random()-.5).slice(0,i-1),M=t.find(y=>y.songId===n);return M&&b.push(M),b.sort(()=>Math.random()-.5)}_shuffleArray(t){for(let n=t.length-1;n>0;n--){const i=Math.floor(Math.random()*(n+1));[t[n],t[i]]=[t[i],t[n]]}return t}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-guess-the-song"]],standalone:!0,features:[e.jDz],decls:2,vars:3,consts:[["class","flex flex-col items-center justify-center mb-6",4,"ngIf"],[1,"flex","flex-col","items-center","justify-center","mb-6"],[1,"w-full","max-w-xl","mx-auto"],["class","my-5 text-center",4,"ngIf"],[1,"text-center","mb-4"],[1,"bg-white","shadow-md","rounded","px-8","pt-6","pb-8","text-black",3,"formGroup","ngClass","ngSubmit"],[1,"mb-6"],[4,"ngIf","ngIfElse"],["loading",""],[1,"flex","flex-col"],["class","radio mb-2",4,"ngFor","ngForOf"],[1,"flex","items-stretch","flex-col","justify-between","pt-4"],[3,"isDisabled","inputType","value","classes"],[1,"w-full","h-4","mt-4"],[4,"ngIf"],[1,"my-5","text-center"],[1,"font-bold"],[1,"radio","mb-2"],["hidden","hidden","type","radio","formControlName","songChoice",3,"id","value","disabled"],[1,"px-2","py-1","rounded-lg","flex","justify-center","items-center","font-bold","w-full","h-10","lg:h-14","hover:cursor-pointer",3,"for"],["id","countdown",4,"ngIf","ngIfElse"],["timesUp",""],["id","countdown"],["id","countdown-number"],[1,"active"],["r","18","cx","20","cy","20"],[1,"text-center"],["class","font-bold",4,"ngIf"]],template:function(t,n){1&t&&(e.YNc(0,ie,25,25,"div",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,n.vm$))},dependencies:[g.ez,g.mk,g.sg,g.O5,g.Ov,D.r,r.UX,r._Y,r.Fj,r._,r.JJ,r.JL,r.sg,r.u],styles:[".radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] ~ label[_ngcontent-%COMP%]{background-color:#e9e1e1;color:#2f4f4f}.radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ label[_ngcontent-%COMP%]{background-color:#46e616;color:#fff}#countdown[_ngcontent-%COMP%]{position:relative;margin:50px auto auto;height:40px;width:40px;text-align:center}#countdown-number[_ngcontent-%COMP%]{color:#fff;display:inline-block;line-height:40px}svg[_ngcontent-%COMP%]{position:absolute;top:0;right:0;width:40px;height:40px;transform:rotateY(-180deg) rotate(-90deg)}svg[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{stroke-dasharray:113px;stroke-dashoffset:0px;stroke-linecap:round;stroke-width:2px;stroke:#fff;fill:none}svg.active[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_countdown 30s linear forwards}@keyframes _ngcontent-%COMP%_countdown{0%{stroke-dashoffset:0px}to{stroke-dashoffset:113px}}form.shake-error[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_horizontal-shaking .3s linear forwards}@keyframes _ngcontent-%COMP%_horizontal-shaking{0%{transform:translate(0)}25%{transform:translate(10px)}50%{transform:translate(-10px)}75%{transform:translate(10px)}to{transform:translate(0)}}"]}),o})()}}]);