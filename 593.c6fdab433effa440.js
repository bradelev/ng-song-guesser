"use strict";(self.webpackChunkng_song_guesser=self.webpackChunkng_song_guesser||[]).push([[593],{593:(j,v,o)=>{o.r(v),o.d(v,{SelectSongComponent:()=>N});var y=o(2138),g=o(6895),s=o(8256),u=o(433),S=o(727);class C extends S.w0{constructor(t,e){super()}schedule(t,e=0){return this}}const f={setInterval(i,t,...e){const{delegate:n}=f;return n?.setInterval?n.setInterval(i,t,...e):setInterval(i,t,...e)},clearInterval(i){const{delegate:t}=f;return(t?.clearInterval||clearInterval)(i)},delegate:void 0};var b=o(8737);const p={now:()=>(p.delegate||Date).now(),delegate:void 0};class h{constructor(t,e=h.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,n){return new this.schedulerActionCtor(this,t).schedule(n,e)}}h.now=p.now;const T=new class A extends h{constructor(t,e=h.now){super(t,e),this.actions=[],this._active=!1}flush(t){const{actions:e}=this;if(this._active)return void e.push(t);let n;this._active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}(class I extends C{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){var n;if(this.closed)return this;this.state=t;const l=this.id,r=this.scheduler;return null!=l&&(this.id=this.recycleAsyncId(r,l,e)),this.pending=!0,this.delay=e,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return f.setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!=n&&this.delay===n&&!1===this.pending)return e;null!=e&&f.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let l,n=!1;try{this.work(t)}catch(r){n=!0,l=r||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),l}unsubscribe(){if(!this.closed){const{id:t,scheduler:e}=this,{actions:n}=e;this.work=this.state=this.scheduler=null,this.pending=!1,(0,b.P)(n,this),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}});var x=o(4482),m=o(5403),O=o(4671);function F(i,t){return i===t}var k=o(3900),J=o(9646),M=o(4004),$=o(6270);function z(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"div",11),s.NdJ("click",function(){const r=s.CHM(e).$implicit,c=s.oxw(2);return s.KtG(c.selectSong(r.songId))}),s._uU(1),s.qZA()}if(2&i){const e=t.$implicit;s.xp6(1),s.Oqu(e.title)}}function L(i,t){if(1&i&&(s.O4$(),s.kcU(),s.TgZ(0,"div",9),s.YNc(1,z,2,1,"div",10),s.qZA()),2&i){const e=t.ngIf;s.xp6(1),s.Q6J("ngForOf",e)}}let N=(()=>{class i{constructor(){this._router=(0,s.f3M)(y.F0),this._songsService=(0,s.f3M)($.e),this.searchSong=new u.NI(""),this.songs$=this.searchSong.valueChanges.pipe(function Z(i,t=T){return(0,x.e)((e,n)=>{let l=null,r=null,c=null;const a=()=>{if(l){l.unsubscribe(),l=null;const d=r;r=null,n.next(d)}};function P(){const d=c+i,w=t.now();if(w<d)return l=this.schedule(void 0,d-w),void n.add(l);a()}e.subscribe((0,m.x)(n,d=>{r=d,c=t.now(),l||(l=t.schedule(P,i),n.add(l))},()=>{a(),n.complete()},void 0,()=>{r=l=null}))})}(500),function U(i,t=O.y){return i=i??F,(0,x.e)((e,n)=>{let l,r=!0;e.subscribe((0,m.x)(n,c=>{const a=t(c);(r||!i(l,a))&&(r=!1,l=a,n.next(c))}))})}(),(0,k.w)(e=>e?this.getSongs(e):(0,J.of)([])))}getSongs(e){return this._songsService.getSongs().pipe((0,M.U)(n=>n.filter(l=>l.title.toLowerCase().includes(e.toLowerCase()))))}selectSong(e){this._router.navigate(["/guess-the-song"],{queryParams:{songId:e}})}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=s.Xpm({type:i,selectors:[["app-select-song"]],standalone:!0,features:[s.jDz],decls:11,vars:4,consts:[[1,"flex","items-center","justify-center","h-screen"],[1,"relative","text-lg","bg-transparent","text-gray-800","w-3/6","m-auto"],[1,"text-3xl","font-bold","text-gray-800","dark:text-white","md:text-4xl","text-center","mb-5"],[1,"border-b","border-b-2","border-teal-500","py-2"],["type","text","autocomplete","off","placeholder","Search song",1,"bg-transparent","border-none","mr-3","px-2","leading-tight","focus:outline-none","w-11/12",3,"formControl"],["type","submit",1,"absolute","right-0","bottom-0","mb-3","mr-4","w-fit"],["xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","version","1.1","id","Capa_1","x","0px","y","0px","viewBox","0 0 56.966 56.966",0,"xml","space","preserve","width","512px","height","512px",1,"h-4","w-4","fill-current",2,"enable-background","new 0 0 56.966 56.966"],["d","M55.146,51.887L41.588,37.786c3.486-4.144,5.396-9.358,5.396-14.786c0-12.682-10.318-23-23-23s-23,10.318-23,23  s10.318,23,23,23c4.761,0,9.298-1.436,13.177-4.162l13.661,14.208c0.571,0.593,1.339,0.92,2.162,0.92  c0.779,0,1.518-0.297,2.079-0.837C56.255,54.982,56.293,53.08,55.146,51.887z M23.984,6c9.374,0,17,7.626,17,17s-7.626,17-17,17  s-17-7.626-17-17S14.61,6,23.984,6z"],["class","absolute mt-4 overflow-hidden rounded-md bg-white py-1 shadow-xl shadow-black/5 ring-1 ring-slate-700/10 w-full",4,"ngIf"],[1,"absolute","mt-4","overflow-hidden","rounded-md","bg-white","py-1","shadow-xl","shadow-black/5","ring-1","ring-slate-700/10","w-full"],["class","px-3 py-2 hover:bg-indigo-600 hover:text-white",3,"click",4,"ngFor","ngForOf"],[1,"px-3","py-2","hover:bg-indigo-600","hover:text-white",3,"click"]],template:function(e,n){1&e&&(s.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),s._uU(3,"Select a Song"),s.qZA(),s.TgZ(4,"div",3),s._UZ(5,"input",4),s.TgZ(6,"button",5),s.O4$(),s.TgZ(7,"svg",6),s._UZ(8,"path",7),s.qZA()(),s.YNc(9,L,2,1,"div",8),s.ALo(10,"async"),s.qZA()()()),2&e&&(s.xp6(5),s.Q6J("formControl",n.searchSong),s.xp6(4),s.Q6J("ngIf",s.lcZ(10,2,n.songs$)))},dependencies:[g.ez,g.sg,g.O5,g.Ov,u.UX,u.Fj,u.JJ,u.oH]}),i})()}}]);